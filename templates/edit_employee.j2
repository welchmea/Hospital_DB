{% include "index.html" %}
<link rel="stylesheet" href="/static/style.css">
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
    />
<body>
<main>
<div class="table-div">
    <table border="1" cellpadding="5">
        <caption><strong> Updating Employee: </strong></caption>
        <!-- Access data tuple passed from app.py -->
        {% if employees_data %}
            <thead>
                <tr>
                    <th>Employee ID</th>
                    <th>Name</th>
                    <th>Email</th>
                    <th>Phone Number</th>
                    <th>Job Name</th>
                    <th>Department Name</th>
                    <th>Employment Status</th>
                </tr>

            <tbody>
                <!-- Iterates through every item in data -->
                <tr>
                {% for item in employees_data %}
                    <!-- Iterates through every key in the current item dictionary -->
                    {% for key in item %}
                    <!-- Creates a <td> element with the value of that key in it -->
                    <td>{{key}}</td>
                    {% endfor %}
                </tr>
                {% endfor %}
        {% endif %}
    </table>
        <!-- form to edit data in employees-->
        <form id="edit_employee" action="/edit_employee/{{employees_data[0].employeeid}}" method="POST">
            <legend><strong>Edit Employee</strong></legend>
                <fieldset>
                <!-- Preset form inputs to match attributes currently stored for 'employeeID' of employee to be updated via value= and accessing our passed data tuple -->
                <!-- Create hidden form input to store the passed 'employeeID' of employee being edited so it can bed accessed in 'POST' method in app.py -->
                <input type="hidden" value="{{employees_data[0].employeeid}}" id="employeeID" name="employeeID" required>
                <label for="name">Employee Name:</label>
                <input type="text" value="{{employees_data[0].name}}" id="name" name="name" pattern="[A-Za-z]{0, 45}" required><br>

                <label for="email">Email:</label>
                <input type="email" value="{{employees_data[0].email}}" id="email" name="email"pattern="[a-zA-Z0-9!#$%&amp;'*+\/=?^_`{|}~.-]+@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*" ><br>

                <label for="phoneNum">Phone Number:</label>
                <input type="text" value="{{employees_data[0].phonenum}}"  id="phoneNum" name="phoneNum" required><br>

                <label for="typeName">Employment Status:</label>
                <select class="form-control" id="typeName" name="typeName" required><br>

                    {% for data in emptypefk %}
                        <option value="{{data[0]}}" >{{data[0]}}</option>
                    {% endfor %}
                </select>

                <label for="jobID">Job Name:</label>
                <select class="form-control" id="jobID" name="jobID" pattern="[0-4]{1}" placeholder="" required>

                    {% for data in jobidfk %}
                        {% if data['jobID'] == employees_data[0].jobid %}
                            <option value="{{data[1]}}">{{data[1]}}</option>
                            {% else %}
                            <option value="{{data[1]}}">{{data[1]}}</option>
                        {% endif %}
                    {% endfor %}
                </select>

                <label for="departmentID">Department Name:</label>
                <select class="form-control" id="departmentID" name="departmentID">
                    {% for data in departmentfk %}
                        {% if data['departmentID'] == employees_data[0].departmentid %}
                            <option value="{{data[1] }}">{{data[1]}}</option>
                        {% else %}
                            <option value="{{data[1]}}">{{data[1]}}</option>
                        {% endif %}
                    {% endfor %}
                </select>
            <input type="submit" value="Update Employee" name="edit_employee">
            </fieldset>
        </form>
        <a class="add-btn" href="/employees">Cancel</a>
    </div>
    </main>
</body>
</html>